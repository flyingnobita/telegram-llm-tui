# PLANS 3.1 - TUI layout v1

## 3.1.1 Feature scope

1. [x] (3.1.1.1) Left chat list with selection highlighting.
2. [x] (3.1.1.2) Main message view with wrapped text.
3. [x] (3.1.1.3) Bottom composer panel for input.
4. [x] (3.1.1.4) LLM draft modal overlay.
5. [x] (3.1.1.5) Command palette overlay with query and actions.
6. [x] (3.1.1.6) Empty-state placeholders for chats and messages.

## 3.1.2 Implementation notes

1. [x] (3.1.2.1) Extend `ui::view::UiState` with chat, message, and overlay state.
2. [x] (3.1.2.2) Render base layout with left chat list, message view, composer.
3. [x] (3.1.2.3) Add centered overlay rendering helpers with `Clear`.
4. [x] (3.1.2.4) Render LLM draft modal with title and wrapped text.
5. [x] (3.1.2.5) Render command palette with query and action list.
6. [x] (3.1.2.6) Add snapshot tests for base layout and overlays.

## 3.1.3 Current state checklist

1. [x] (3.1.3.1) Layout v1 rendered in `ui::view`.
2. [x] (3.1.3.2) Overlay rendering for LLM draft modal.
3. [x] (3.1.3.3) Overlay rendering for command palette.
4. [x] (3.1.3.4) Snapshot tests cover base layout and overlays.

## 3.1.4 Next steps

1. [x] (3.1.4.1) Implement layout state models and rendering logic.
2. [x] (3.1.4.2) Add overlay rendering and helpers.
3. [x] (3.1.4.3) Update UI snapshot tests.
4. [x] (3.1.4.4) Run formatting, linting, and UI tests.

## 3.1.5 Follow-ups and gaps

1. [x] (3.1.5.1) Wire chat and message data from core cache (see `docs/plan-progress/3.1.5-ui-cache-wiring.md`).
2. [x] (3.1.5.2) Add scrollback, selection, and search interactions (3.2).
3. [ ] (3.1.5.3) Add accessibility and theming support.

## 3.1.6 Logging

1. (3.1.6.1) Primary log file is `data/logs/app.log` (configured in
   `app/config/app.toml`).
2. (3.1.6.2) Error log file is `data/logs/app-error.log` (configured in
   `app/config/app.toml`).
3. (3.1.6.3) Log level uses `[logging].level` in `app/config/app.toml`
   (default `info`).
4. (3.1.6.4) Log format uses `[logging].format` in `app/config/app.toml`
   (default `plain`).
5. (3.1.6.5) Rotation uses `[logging].rotation` and size-based defaults in
   `app/config/app.toml`.
